<!-- html -->
<div id="centered">
  <h2>Layers with Bob</h2>
  <p>Let's see how traumatized (Mr. Incredible) will be after looking at your layers panel ðŸ‘€</p>
  
  <img id="imageid" src="https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase1.jpg" alt="Mr Incredible">
  
  <div class="buttonGroup" id="buttonGroup">
    <div class="leftGroup">
      <button id="start">Start Sesh</button>
      <button id="reset"><img src="https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/sync.svg" alt="Reset Icon"> </button>
    </div>
    <div class="rightGroup">
      <button id="close">Close</button>
    </div>
  </div>
</div>

<!-- javascript -->
<script>
  const img = document.getElementById('imageid');

  document.getElementById('start').onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'start-sesh' } }, '*')
  }

  document.getElementById('close').onclick = () => {
    parent.postMessage({ pluginMessage: { type: 'close' } }, '*')
  }

  document.getElementById('reset').onclick = () => {
    img.src = "https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase1.jpg";
  }

  onmessage = (event) => {
    const numberBack = event.data.pluginMessage;
    // console.log("got this from the plugin code", numberBack);

    // phase 2
    if (numberBack > 0 && numberBack <= 4) {
      img.src = "https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase2.jpg";
    }

    // phase 3
    if (numberBack > 4 && numberBack <= 8) {
      img.src = "https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase3.jpg";
    }

    // phase 4
    if (numberBack > 8 && numberBack <= 12) {
      img.src = "https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase4.jpg";
    }

    // phase 5
    if (numberBack > 12 && numberBack <= 16) {
      img.src = "https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase5.jpg";
    }

    // phase 6
    if (numberBack > 16 && numberBack <= 20) {
      img.src = "https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase6.jpg";
    }

    // phase 7
    if (numberBack > 20 && numberBack <= 24) {
      img.src = "https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase7.jpg";
    }

    // phase 8
    if (numberBack > 24 && numberBack <= 28) {
      img.src = "https://raw.githubusercontent.com/jesussandreas/figma-plugin-project/main/images/phase8.jpg";
    }

    else {
      return false;
    }
  }
</script>

<style>
  body {
    font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    margin: 20px;
  }

  #centered {
    display: block;
    margin: 0 auto;
    /* border: 1px solid red; */
  }

  h2 {
    margin-bottom: 0;
    padding-bottom: 0;
    font-size: 24px;
    letter-spacing: -0.2px;
  }

  p {
    margin-top: 14px;
    font-size: 14px;
    line-height: 18px;
    color: #24292F;
    padding-top: 0;
  }

  img {
    height: 360px;
    width: 360px;
    max-width: 360px;
    max-height: 360px;
    border-radius: 6px;
    margin-top: 8px;
  }

  .buttonGroup {
    display: flex;
    align-items: center;
    justify-content: space-between;
    flex-grow: 100%;
    flex-wrap: nowrap;
    margin-top: 12px;
    padding-top: 12px;
  }

  .buttonGroup .leftGroup {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    flex-grow: 50%;
  }

  .buttonGroup .rightGroup {
    display: flex;
    justify-items: flex-end;
    flex-grow: 50%;
  }

  button {
    font-size: 14px;
    padding: 10px 14px 10px 14px;
    border-radius: 6px;
    background-color: white;
    transition: all .3s ease-in-out;
    will-change: transform;
    /* cursor: pointer; */
  }

  #reset {
    border: 2px solid #141414;
    margin: 0;
    padding: 0;
  }
  
  #reset img {
    margin: 0;
    padding: 8px 12px 8px 12px;
    max-width: 20px;
    max-height: 20px;
    height: 20px;
    width: 20px;
    will-change: transform;
    transition: all .3s ease-in-out;
  }

  #reset img:hover {
    transform: rotate(-34deg);
  }

  #start {
    background-color: #141414;
    color: whitesmoke;
    border: 2px solid #141414;
    margin-right: 8px;
  }

  #start:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px 0 rgba(0, 0, 0, 0.3);
  }

  #close {
    border: 2px solid #141414;
  }

  #close:hover {
    background-color: #141414;
    color: whitesmoke;
    /* transform: translateY(-2px); */
    /* box-shadow: 0 14px 32px 0 rgba(0, 0, 0, 0.3); */
  }
</style>